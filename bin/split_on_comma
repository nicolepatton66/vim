#!/usr/bin/env bash
set -e

# pretty print key value pairs (comma separated)

split_on_comma=perl ~/.vim/bin/split_on_comma.pl

if [[ -n $1 ]]; then
    columnize=y
    if [[ $1 = -n ]]; then
        columnize=n
        shift
    fi

    line=$*

    if [[ $columnize = y ]]; then
        split_on_comma $line | sort | column -t | less
    else
        split_on_comma $line | sort | less
    fi
else
    while read input
    do
        line=$input
    done < "${1:-/dev/stdin}"

    split_on_comma $line | sort | column -t
fi
