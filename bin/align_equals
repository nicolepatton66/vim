#!/usr/bin/env ruby

leader = nil
line_arrays = []
max_sizes = []

ARGF.each_with_index do |line, line_no|
  line.chomp!.gsub!(/^(\s*)/, '')
  leader = $1 if leader.nil?
  line_arrays[line_no] = line.split('=')
  line_arrays[line_no].each_with_index do |token, col_num|
    max_sizes[col_num] = token.length if token.length > (max_sizes[col_num] || 0)
  end
end

line_arrays.each_with_index do |tokens, line_no|
  tokens.each_with_index do |token, col_num|
    line_arrays[line_no][col_num] << ' ' * (max_sizes[col_num] - token.length)
  end
  line = line_arrays[line_no].join('=')
  puts "#{leader}#{line.gsub(/\s+$/, '')}"
end
