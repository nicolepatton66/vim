#!/usr/bin/env ruby

# pretty print ActiveRecord output

full_string = ARGF.read

full_string.sub!(/^#<ActiveRecord::Relation \[/, '')
full_string.sub!(/\]>$/, '')
full_string.sub!(/^#</, '')
full_string.sub!(/>$/, '')

full_string.split(/>, #</).each do |section|
  section.sub!(/^([a-zA-Z:]+) /, '') # pull out the model name
  puts $1

  section.split(/, /).sort.each do |part|
    puts "  #{part}"
  end
  puts
end
