#!/usr/bin/env perl

use strict;

my $comment = "-- ";

my @lines = ();
my $dist  = 100000;

while(<>) {
    chomp(my $line = $_);
    push @lines, $line;

    m/^\s*$/ and next;

    m/^(\s*)/;
    my $len = length $1;
    $dist = $len if $len < $dist;
}

$dist = 0 if $dist == 100000;

foreach my $line (@lines) {

    if(length($line) > $dist) {
        print substr($line, 0, $dist) . $comment . substr($line, $dist) . "\n";
    } else {
        print " " x $dist . "$comment\n";
    }
}

exit 0;
